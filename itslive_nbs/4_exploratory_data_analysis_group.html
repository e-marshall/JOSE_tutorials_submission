
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. Exploratory data analysis of multiple glaciers &#8212; Cloud-native geospatial datacube workflows with open-source tools</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'itslive_nbs/4_exploratory_data_analysis_group';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sentinel-1 RTC imagery tutorial" href="../intro/sentinel1_intro.html" />
    <link rel="prev" title="3. Exploratory data analysis of a single glacier" href="3_exploratory_data_analysis_single.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">ðŸš§ Feb 2025 - This book is under construction! ðŸš§
</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../introduction.html">
  
  
  
  
  
  
    <p class="title logo__title">Cloud-native geospatial datacube workflows with open-source tools</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../introduction.html">
                    Cloud-native geospatial datacube workflows with open-source tools
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../intro/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/other_resources.html">Other resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TODO.html">to do</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Background</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../background/background.html">Context and motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/anatomy_of_a_data_cube.html">Anatomy of a data cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/tutorials_overview.html">Tutorials overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/tutorial_data.html">Data used in tutorials</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 1</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../intro/itslive_intro.html">ITS_LIVE ice velocity data tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_and_data.html">Software and Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_accessing_itslive_s3_data.html">1. Accessing cloud-hosted ITS_LIVE data</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_data_organization_manipulation.html">2. Data organization and manipulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_exploratory_data_analysis_single.html">3. Exploratory data analysis of a single glacier</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">4. Exploratory data analysis of multiple glaciers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../intro/sentinel1_intro.html">Sentinel-1 RTC imagery tutorial</a></li>




<li class="toctree-l1"><a class="reference internal" href="../s1_nbs/ch1_root.html">Data cleaning and organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s1_nbs/1_1_read_asf_s1_rtc_data_using_gdal_vrt.html">Introduction</a></li>








<li class="toctree-l1"><a class="reference internal" href="../s1_nbs/1_2_inspect_organize_asf_data.html">2. Inspect and organize S1-RTC data processed by ASF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s1_nbs/1_3_read_planetary_computer_s1_data.html">3. Read and inspect Sentinel-1 RTC imagery processed by Microsoft Planetary Computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s1_nbs/ch2_root.html">Dataset comparison and preliminary analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s1_nbs/2_1_comparing_s1_rtc_datasets.html">1. Comparing Sentinel-1 RTC datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s1_nbs/2_1_example_s1_rtc_time_series_analysis.html">2: Example of Sentinel-1 RTC time series analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Summary + Conclusion</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../pt4/summary.html">Tutorials summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pt4/tidy_principles.html">Principles of tidy array data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pt4/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pt4/appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix1_handle_mult_geom_types.html">Handling different geometry types in a <code class="docutils literal notranslate"><span class="pre">GeoPandas.GeoDataFrame</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../s1_nbs/app_1_read_asf_s1_rtc_using_xropenmf.html">1. Read Sentinel-1 RTC data processed by ASF using <code class="docutils literal notranslate"><span class="pre">xr.open_mfdataset()</span></code> approach</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/e-marshall/itslive/master?urlpath=lab/tree/itslive_nbs/4_exploratory_data_analysis_group.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/e-marshall/itslive" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/e-marshall/itslive/issues/new?title=Issue%20on%20page%20%2Fitslive_nbs/4_exploratory_data_analysis_group.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/itslive_nbs/4_exploratory_data_analysis_group.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>4. Exploratory data analysis of multiple glaciers</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#outline">Outline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning goals</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#concepts">Concepts</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#techniques">Techniques</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-read-and-organize-data">A. Read and organize data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raster-data">1) Raster data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vector-data">2) Vector data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-combine-raster-and-vector-data-to-create-a-vector-data-cube">B. Combine raster and vector data to create a vector data cube</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#make-a-vector-data-cube">1) Make a vector data cube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-attribute-data-to-vector-cube">2) Add attribute data to vector cube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#write-vector-cube-to-disk">3) Write vector cube to disk</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#steps-to-write-vector-data-cube-to-disk">Steps to write vector data cube to disk</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#c-data-visualization">C. Data visualization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-vector-data-cube-into-memory">1) Read vector data cube into memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualize-velocity-data">2) Visualize velocity data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualize-associations-between-velocity-and-attribute-data">3) Visualize associations between velocity and attribute data</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="exploratory-data-analysis-of-multiple-glaciers">
<h1>4. Exploratory data analysis of multiple glaciers<a class="headerlink" href="#exploratory-data-analysis-of-multiple-glaciers" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>The previous notebooks in this tutorial demonstrated how to use Xarray to access, inspect, manipulate and analyze raster time series data at the scale of an individual glacier. In this notebook, we shift our focus to a sub-regional scale, looking at all of the glaciers within a given ITS_LIVE data cube. This workflow will draw on elements from the past notebooks while introducing new tools for examining raster data along temporal and spatial dimensions (ie. across multiple glaciers).</p>
<section id="outline">
<h3>Outline<a class="headerlink" href="#outline" title="Link to this heading">#</a></h3>
<p id="content-section-a"><strong><a class="reference internal" href="#a-read-and-organize-data">A. Read and organize data</a></strong></p>
<ul class="simple">
<li><ol class="arabic simple">
<li><p>Raster data</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>Vector data</p></li>
</ol>
</li>
</ul>
<p id="content-section-b">**<a class="reference internal" href="#b-combine-raster-and-vector-data-to-create-a-vector-data-cube">B. Combine raster and vector data to create a vector data cube</a></p>
<ul class="simple">
<li><ol class="arabic simple">
<li><p>Make a vector data cube</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>Add attribute data to vector cube</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="3">
<li><p>Write vector cube to disk</p></li>
</ol>
</li>
</ul>
<p id="content-section-c"><strong><a class="reference internal" href="#c-data-visualization">C. Data visualization</a></strong></p>
<ul class="simple">
<li><ol class="arabic simple">
<li><p>Read vector data cube into memory</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="2">
<li><p>Visualize velocity data</p></li>
</ol>
</li>
<li><ol class="arabic simple" start="3">
<li><p>Visualize associations between velocity and attribute data</p></li>
</ol>
</li>
</ul>
</section>
<section id="learning-goals">
<h3>Learning goals<a class="headerlink" href="#learning-goals" title="Link to this heading">#</a></h3>
<section id="concepts">
<h4>Concepts<a class="headerlink" href="#concepts" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Querying and accessing raster data from cloud object storage</p></li>
<li><p>Accessing and manipulating vector data</p></li>
<li><p>Handling coordinate reference information</p></li>
<li><p>Calculating and visualizing summary statistics</p></li>
</ul>
</section>
<section id="techniques">
<h4>Techniques<a class="headerlink" href="#techniques" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Access cloud-hosted <a class="reference external" href="https://zarr.readthedocs.io/en/stable/">Zarr</a> data cubes using <a class="reference external" href="https://xarray.dev/">Xarray</a></p></li>
<li><p>Reading <a class="reference external" href="https://geoparquet.org/">GeoParquet</a> vector data using <a class="reference external" href="https://geopandas.org/en/stable/">GeoPandas</a></p></li>
<li><p>Rasterize vector objects using <a class="reference internal" href="#"><span class="xref myst">Geocube</span></a></p></li>
<li><p>Spatial joins of vector datasets using <a class="reference external" href="https://geopandas.org/en/stable/">GeoPandas</a></p></li>
<li><p>Using <a class="reference external" href="https://www.dask.org/">dask</a> to work with out-of-memory data</p></li>
<li><p>Calculating summary statistics of <a class="reference external" href="https://xarray.dev/">Xarray</a> and <a class="reference external" href="https://pandas.pydata.org/">Pandas</a> objects</p></li>
<li><p>Data visualization using <a class="reference external" href="https://pandas.pydata.org/">Pandas</a></p></li>
<li><p>Interactive data visualization with <a class="reference external" href="https://geopandas.org/en/stable/">GeoPandas</a></p></li>
</ul>
<p>Expand the next cell to see specific packages used in this notebook and relevant system and version information.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">xmode</span> minimal

<span class="kn">import</span><span class="w"> </span><span class="nn">contextily</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cx</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">dask</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dask.diagnostics</span><span class="w"> </span><span class="kn">import</span> <span class="n">ProgressBar</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gpd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rioxarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">rxr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">xvec</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">itslivetools</span>
    
<span class="o">%</span><span class="k">config</span> InlineBackend.figure_format=&#39;retina&#39;
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Exception reporting mode: Minimal
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="a-read-and-organize-data">
<h2>A. Read and organize data<a class="headerlink" href="#a-read-and-organize-data" title="Link to this heading">#</a></h2>
<section id="raster-data">
<h3>1) Raster data<a class="headerlink" href="#raster-data" title="Link to this heading">#</a></h3>
<p>As in past notebooks, we use <code class="docutils literal notranslate"><span class="pre">itslivetools.find_granule_by_point()</span></code> to query the ITS_LIVE catalog for the correct url.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">itslive_catalog</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;https://its-live-data.s3.amazonaws.com/datacubes/catalog_v02.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">itslivetools</span><span class="o">.</span><span class="n">find_granule_by_point</span><span class="p">([</span><span class="mf">95.180191</span><span class="p">,</span> <span class="mf">30.645973</span><span class="p">])</span>
<span class="n">url</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;http://its-live-data.s3.amazonaws.com/datacubes/v2-updated-october2024/N30E090/ITS_LIVE_vel_EPSG32646_G0120_X750000_Y3350000.zarr&#39;
</pre></div>
</div>
</div>
</div>
<p>Following the example shown in the initial data inspection <a class="reference internal" href="#"><span class="xref myst">notebook</span></a>, we read the data in <em>without</em> dask at first so that we can lazily organize the dataset in chronological order</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dc</span> <span class="o">=</span> <span class="n">itslivetools</span><span class="o">.</span><span class="n">read_in_s3</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">chunks_arg</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">dc</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="s1">&#39;mid_date&#39;</span><span class="p">)</span>
<span class="n">dc</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">TypeError</span>: read_in_s3() got an unexpected keyword argument &#39;chunks_arg&#39;
</pre></div>
</div>
</div>
</div>
<p>Now we add a chunking scheme, converting the underlying Numpy arrays to Dask arrays.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#First, check the preffered chunk sizes</span>
<span class="n">dc</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encoding</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;dc&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Then, chunk dataset</span>
<span class="n">dc</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">chunk</span><span class="p">({</span><span class="s1">&#39;mid_date&#39;</span><span class="p">:</span><span class="mi">20000</span><span class="p">,</span>
               <span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;dc&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Weâ€™ll resample the time series to 3-month resolution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dc_resamp</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">mid_date</span><span class="o">=</span><span class="s1">&#39;3ME&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
                        
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;dc&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Create a <code class="docutils literal notranslate"><span class="pre">crs</span></code> object based on the <code class="docutils literal notranslate"><span class="pre">projection</span></code> data variable of the data cube (<code class="docutils literal notranslate"><span class="pre">dc</span></code>) object. Weâ€™ll use this later.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">crs</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;EPSG:</span><span class="si">{</span><span class="n">dc</span><span class="o">.</span><span class="n">projection</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="n">crs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;dc&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="vector-data">
<h3>2) Vector data<a class="headerlink" href="#vector-data" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">se_asia</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;../data/tutorial1/rgi7_region15_south_asia_east.parquet&#39;</span><span class="p">)</span>
<span class="n">se_asia</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>rgi_id</th>
      <th>o1region</th>
      <th>o2region</th>
      <th>glims_id</th>
      <th>anlys_id</th>
      <th>subm_id</th>
      <th>src_date</th>
      <th>cenlon</th>
      <th>cenlat</th>
      <th>utm_zone</th>
      <th>...</th>
      <th>zmin_m</th>
      <th>zmax_m</th>
      <th>zmed_m</th>
      <th>zmean_m</th>
      <th>slope_deg</th>
      <th>aspect_deg</th>
      <th>aspect_sec</th>
      <th>dem_source</th>
      <th>lmax_m</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>RGI2000-v7.0-G-15-00001</td>
      <td>15</td>
      <td>15-01</td>
      <td>G078088E31398N</td>
      <td>866850</td>
      <td>752</td>
      <td>2002-07-10T00:00:00</td>
      <td>78.087891</td>
      <td>31.398046</td>
      <td>44</td>
      <td>...</td>
      <td>4662.2950</td>
      <td>4699.2095</td>
      <td>4669.4720</td>
      <td>4671.4253</td>
      <td>13.427070</td>
      <td>122.267290</td>
      <td>4</td>
      <td>COPDEM30</td>
      <td>173</td>
      <td>POLYGON Z ((78.08905 31.39784 0, 78.08897 31.3...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>RGI2000-v7.0-G-15-00002</td>
      <td>15</td>
      <td>15-01</td>
      <td>G078125E31399N</td>
      <td>867227</td>
      <td>752</td>
      <td>2002-07-10T00:00:00</td>
      <td>78.123699</td>
      <td>31.397796</td>
      <td>44</td>
      <td>...</td>
      <td>4453.3584</td>
      <td>4705.9920</td>
      <td>4570.9473</td>
      <td>4571.2770</td>
      <td>22.822983</td>
      <td>269.669144</td>
      <td>7</td>
      <td>COPDEM30</td>
      <td>1113</td>
      <td>POLYGON Z ((78.12556 31.40257 0, 78.12557 31.4...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>RGI2000-v7.0-G-15-00003</td>
      <td>15</td>
      <td>15-01</td>
      <td>G078128E31390N</td>
      <td>867273</td>
      <td>752</td>
      <td>2000-08-05T00:00:00</td>
      <td>78.128510</td>
      <td>31.390287</td>
      <td>44</td>
      <td>...</td>
      <td>4791.7593</td>
      <td>4858.6807</td>
      <td>4832.1836</td>
      <td>4827.6700</td>
      <td>15.626262</td>
      <td>212.719681</td>
      <td>6</td>
      <td>COPDEM30</td>
      <td>327</td>
      <td>POLYGON Z ((78.1296 31.39093 0, 78.12961 31.39...</td>
    </tr>
  </tbody>
</table>
<p>3 rows Ã— 29 columns</p>
</div></div></div>
</div>
<p>What coordinate reference system is this dataframe in?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">se_asia</span><span class="o">.</span><span class="n">crs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Geographic 2D CRS: EPSG:4326&gt;
Name: WGS 84
Axis Info [ellipsoidal]:
- Lat[north]: Geodetic latitude (degree)
- Lon[east]: Geodetic longitude (degree)
Area of Use:
- name: World.
- bounds: (-180.0, -90.0, 180.0, 90.0)
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich
</pre></div>
</div>
</div>
</div>
<p>The vector dataset is in WGS 84, meaning that its coordinates are in degrees latitude and longitude rather than meters N and E. We will project this dataset to match the projection of the raster dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">se_asia_prj</span> <span class="o">=</span> <span class="n">se_asia</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">crs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;crs&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">se_asia_prj</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;se_asia_prj&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>The vector dataframe representing glacier outlines is very large. For now, weâ€™re only interested in glaciers that lie within the footprint of the ITS_LIVE granule weâ€™re working with and that are larger than 5 square kilometers in area. We subset the full dataset to match those conditions:</p>
<p>To start with, we will look only at glaciers larger in area than 5km2. Subset the dataset to select for those glaciers; start by making a GeoDataFrame of the ITS_LIVE granule footprint in order to perform a spatial join and select only the glaciers from the RGI dataframe (<code class="docutils literal notranslate"><span class="pre">se_asia_prj</span></code>) that are within the granule:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dc_bbox</span> <span class="o">=</span> <span class="n">itslivetools</span><span class="o">.</span><span class="n">get_bounds_polygon</span><span class="p">(</span><span class="n">dc</span><span class="p">)</span>
<span class="n">dc_bbox</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Footprint of ITS_LIVE granule&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;dc&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Spatial join</span>
<span class="n">rgi_subset</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">sjoin</span><span class="p">(</span><span class="n">se_asia_prj</span><span class="p">,</span> 
                         <span class="n">dc_bbox</span><span class="p">,</span>
                         <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="c1">#Select only glaciers where area &gt;= 5 km2</span>
<span class="n">rgi_subset</span> <span class="o">=</span> <span class="n">rgi_subset</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">rgi_subset</span><span class="p">[</span><span class="s1">&#39;area_km2&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">5.</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;se_asia_prj&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Now, we are looking at </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">rgi_subset</span><span class="p">)</span><span class="si">}</span><span class="s1"> glaciers.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;rgi_subset&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="b-combine-raster-and-vector-data-to-create-a-vector-data-cube">
<h2>B. Combine raster and vector data to create a vector data cube<a class="headerlink" href="#b-combine-raster-and-vector-data-to-create-a-vector-data-cube" title="Link to this heading">#</a></h2>
<p>Vector data cubes are a data structure similar to a raster data cube, but with a dimension represented by an array of geometries. For a detailed explanation of vector data cubes, see Edzer Pebesmaâ€™s <a class="reference external" href="https://r-spatial.org/r/2022/09/12/vdc.html">write-up</a>. <a class="reference external" href="https://xvec.readthedocs.io/en/stable/">Xvec</a> is a relatively new Python package that implements vector data cubes within the Xarray ecosystem. This is an exciting development that can drastically simplify workflows that examine data along both spatial and temporal dimensions and involve spatial features represented by vector points, lines and polygons.</p>
<p>To explain this in more detail, we currently have a raster data cube (the ITS_LIVE time series) that covers the entire spatial footprint shown in blue below. However, the locations in which we are interested in this data are the glaciers outlined in red. Working with this data as a 3-dimensional vector cube is not a very efficient way of accessing the data at the locations shown in red.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">dc_bbox</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">rgi_subset</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="n">cx</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> 
               <span class="n">source</span><span class="o">=</span><span class="n">cx</span><span class="o">.</span><span class="n">providers</span><span class="o">.</span><span class="n">Esri</span><span class="o">.</span><span class="n">WorldImagery</span><span class="p">,)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Spatial extent of ITS_LIVE granule, shown in blue </span><span class="se">\n</span><span class="s1"> outlines of glaciers of interest, shown in red.&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;dc_bbox&#39; is not defined
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/4d6beefccd0eea7cfdb6c4da7fccc5717a1465d08704576c338403a3845cb9e6.png"><img alt="../_images/4d6beefccd0eea7cfdb6c4da7fccc5717a1465d08704576c338403a3845cb9e6.png" src="../_images/4d6beefccd0eea7cfdb6c4da7fccc5717a1465d08704576c338403a3845cb9e6.png" style="width: 992px; height: 511px;" /></a>
</div>
</div>
<p>Instead, we use the <a class="reference external" href="https://xvec.readthedocs.io/en/stable/zonal_stats.html"><code class="docutils literal notranslate"><span class="pre">Xvec.zonal_stats()</span></code></a> method to convert the 3-dimensional cube to a 2-dimensional cube that has  time dimesnion and a geometry dimension. Each element of the geometry dimension is a glacier from the <code class="docutils literal notranslate"><span class="pre">rgi_subset</span></code> dataframe.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because we are working with polygon geometries, we use zonal_stats() which performs a reduction over the area of the polygon. If our vector data was made up of point features, we could use <a class="reference external" href="https://xvec.readthedocs.io/en/stable/extract_pts.html"><code class="docutils literal notranslate"><span class="pre">Xvec.extract_points()</span></code></a></p>
</div>
<section id="make-a-vector-data-cube">
<h3>1) Make a vector data cube<a class="headerlink" href="#make-a-vector-data-cube" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dask</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">({</span><span class="s2">&quot;array.slicing.split_large_chunks&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
<span class="n">vector_data_cube</span> <span class="o">=</span> <span class="n">dc_resamp</span><span class="o">.</span><span class="n">xvec</span><span class="o">.</span><span class="n">zonal_stats</span><span class="p">(</span><span class="n">rgi_subset</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span>
                                       <span class="n">x_coords</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">y_coords</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">drop_vars</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;dc_resamp&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vector_data_cube</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;vector_data_cube&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Great, now weâ€™ve gone from a 3-d object with (mid_date,x,y) dimensions to a 2-d object with (mid_date, geometry) dimensions. However, in addition to the geometry data stored in the vector dataframe, weâ€™d also like to add some of the attribute data to the ITS_LIVE time series vector cube. The following cell adds attributes as coordinate variables to the vector data cube.</p>
</section>
<section id="add-attribute-data-to-vector-cube">
<h3>2) Add attribute data to vector cube<a class="headerlink" href="#add-attribute-data-to-vector-cube" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Define attributes to be added</span>
<span class="n">rgi_attrs_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;RGIId&#39;</span><span class="p">:</span> <span class="s1">&#39;rgi_id&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Area_km2&#39;</span><span class="p">:</span> <span class="s1">&#39;area_km2&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Slope_deg&#39;</span><span class="p">:</span> <span class="s1">&#39;slope_deg&#39;</span><span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">update_cube_attrs</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">gdf</span><span class="p">,</span> <span class="n">attrs_dict</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attrs_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">ds</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;geometry&#39;</span><span class="p">),</span> <span class="n">gdf</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">({</span><span class="n">k</span><span class="p">:</span> <span class="n">ds</span><span class="p">[</span><span class="n">k</span><span class="p">]})</span>
    <span class="k">return</span> <span class="n">ds</span>

<span class="n">vector_data_cube</span> <span class="o">=</span> <span class="n">update_cube_attrs</span><span class="p">(</span><span class="n">vector_data_cube</span><span class="p">,</span> <span class="n">rgi_subset</span><span class="p">,</span> <span class="n">rgi_attrs_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;vector_data_cube&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vector_data_cube</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;vector_data_cube&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="write-vector-cube-to-disk">
<h3>3) Write vector cube to disk<a class="headerlink" href="#write-vector-cube-to-disk" title="Link to this heading">#</a></h3>
<p>Later in this notebook, we will want to perform operations that require this object to be loaded into memory. All of our steps thus far have happened lazily, and when we do load the data into memory it will be quite time-consuming.</p>
<p>To skip this step, Iâ€™ve loaded the data into memory and written it to disk. This allows us to read the vector data cube (which is much more manageable) into memory from file.</p>
<p>Because this step is quite computationally intensive, I wonâ€™t execute it here, but I will include the code for the sake of completeness.</p>
<section id="steps-to-write-vector-data-cube-to-disk">
<h4>Steps to write vector data cube to disk<a class="headerlink" href="#steps-to-write-vector-data-cube-to-disk" title="Link to this heading">#</a></h4>
<ol class="arabic">
<li><p>Encode vector data code geometries as [CF] geometries.
This is required because Shapely geometries (how geometries are represented in memory) are not compatible with array-based file formats such as Zarr. To get around this, Xvec uses a package called cf-xarray to encode the Shapely geometries as CF geometries. For more detail on reading and writing vector data cubes, see the Xvec <a class="reference external" href="https://xvec.readthedocs.io/en/stable/io.html">documentation</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">encoded_vdc</span> <span class="o">=</span> <span class="n">vector_data_cube</span><span class="o">.</span><span class="n">xvec</span><span class="o">.</span><span class="n">encode_cf</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Write encoded data cube to Zarr (<em>This triggers <code class="docutils literal notranslate"><span class="pre">.compute()</span></code>, loading the data into memory before writing it to disk.</em> On my computer, this took about 12 minutes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ProgressBar</span><span class="p">():</span>

    <span class="n">encoded_vdc</span><span class="o">.</span><span class="n">to_zarr</span><span class="p">(</span><span class="s1">&#39;data/regional_glacier_velocity_vector_cube.zarr&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:
[########################################] | 100% Completed | 12m 15s</p>
</li>
</ol>
</section>
</section>
</section>
<section id="c-data-visualization">
<h2>C. Data visualization<a class="headerlink" href="#c-data-visualization" title="Link to this heading">#</a></h2>
<section id="read-vector-data-cube-into-memory">
<h3>1) Read vector data cube into memory<a class="headerlink" href="#read-vector-data-cube-into-memory" title="Link to this heading">#</a></h3>
<p>The vector data cube is stored on disk with CF geometries. We go through the reverse of the process we used to write the object to disk, decoding the CF geometries to Shapely geometries with <code class="docutils literal notranslate"><span class="pre">xvec.decode_cf()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vector_data_cube_cf</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_zarr</span><span class="p">(</span><span class="s1">&#39;../data/tutorial1/regional_glacier_velocity_vector_cube.zarr&#39;</span><span class="p">)</span>
<span class="n">vector_data_cube</span> <span class="o">=</span> <span class="n">vector_data_cube_cf</span><span class="o">.</span><span class="n">xvec</span><span class="o">.</span><span class="n">decode_cf</span><span class="p">()</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">FileNotFoundError</span>: Unable to find group: file:///home/emmamarshall/Desktop/phd_research/ch1/JOSE_tutorials_submission/book/data/tutorial1/regional_glacier_velocity_vector_cube.zarr
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualize-velocity-data">
<h3>2) Visualize velocity data<a class="headerlink" href="#visualize-velocity-data" title="Link to this heading">#</a></h3>
<p>Xvec has a method, <code class="docutils literal notranslate"><span class="pre">to_geodataframe()</span></code> that allows us to easily convert the <code class="docutils literal notranslate"><span class="pre">xr.Dataset</span></code> vector cube to a <code class="docutils literal notranslate"><span class="pre">gpd.GeoDataFrame</span></code>. We can then use the GeoPandas <code class="docutils literal notranslate"><span class="pre">.explore()</span></code> method to interactively visualize the data.</p>
<p>We will look at mean velocities over time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vector_data_cube_mean</span> <span class="o">=</span> <span class="n">vector_data_cube</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;mid_date&#39;</span><span class="p">)</span>

<span class="n">vector_data_cube_mean</span><span class="p">[</span><span class="s1">&#39;vmag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">vector_data_cube_mean</span><span class="p">[</span><span class="s1">&#39;vx&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">vector_data_cube_mean</span><span class="p">[</span><span class="s1">&#39;vy&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="n">vector_data_cube_mean</span><span class="p">[</span><span class="s1">&#39;vmag&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">xvec</span><span class="o">.</span><span class="n">to_geodataframe</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">explore</span><span class="p">(</span><span class="s1">&#39;vmag&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;vector_data_cube&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>We could also look at single seasons:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vector_cube_seasonal_mean</span> <span class="o">=</span> <span class="n">vector_data_cube</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;mid_date.season&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">vector_cube_seasonal_mean</span><span class="p">[</span><span class="s1">&#39;vmag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">vector_cube_seasonal_mean</span><span class="p">[</span><span class="s1">&#39;vx&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">vector_cube_seasonal_mean</span><span class="p">[</span><span class="s1">&#39;vy&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="n">vector_cube_seasonal_mean</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">season</span><span class="o">=</span><span class="s1">&#39;JJA&#39;</span><span class="p">)[</span><span class="s1">&#39;vmag&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">xvec</span><span class="o">.</span><span class="n">to_geodataframe</span><span class="p">(</span><span class="n">geometry</span><span class="o">=</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">explore</span><span class="p">(</span><span class="s1">&#39;vmag&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;vector_data_cube&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualize-associations-between-velocity-and-attribute-data">
<h3>3) Visualize associations between velocity and attribute data<a class="headerlink" href="#visualize-associations-between-velocity-and-attribute-data" title="Link to this heading">#</a></h3>
<p>In addition to using GeoPandas plotting features, we can still use Xarrayâ€™s built in plotting features to visualize the non-spatial elements of the data. Below, we visualize the relationships between magnitude of velocity (y-axis), glacier slope (x-axis) and glacier area (hue).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Mean velocity in the context of glacier area and slope&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

<span class="n">sc</span> <span class="o">=</span> <span class="n">vector_data_cube_mean</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;Slope_deg&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;vmag&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Area_km2&#39;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">add_colorbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cbar_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Glacier area (sq. km.)&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Magnitude of velocity (m/yr)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Glacier slope (degrees)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;vector_data_cube_mean&#39; is not defined
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/2722dcb53c43e3442d88539b765a371c1cc116da7905d023aad0d6055add8258.png"><img alt="../_images/2722dcb53c43e3442d88539b765a371c1cc116da7905d023aad0d6055add8258.png" src="../_images/2722dcb53c43e3442d88539b765a371c1cc116da7905d023aad0d6055add8258.png" style="width: 618px; height: 461px;" /></a>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{{</span><span class="n">conclusion</span><span class="p">}}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span>: name &#39;conclusion&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./itslive_nbs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="3_exploratory_data_analysis_single.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">3. Exploratory data analysis of a single glacier</p>
      </div>
    </a>
    <a class="right-next"
       href="../intro/sentinel1_intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Sentinel-1 RTC imagery tutorial</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#outline">Outline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning goals</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#concepts">Concepts</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#techniques">Techniques</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-read-and-organize-data">A. Read and organize data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raster-data">1) Raster data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vector-data">2) Vector data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-combine-raster-and-vector-data-to-create-a-vector-data-cube">B. Combine raster and vector data to create a vector data cube</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#make-a-vector-data-cube">1) Make a vector data cube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-attribute-data-to-vector-cube">2) Add attribute data to vector cube</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#write-vector-cube-to-disk">3) Write vector cube to disk</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#steps-to-write-vector-data-cube-to-disk">Steps to write vector data cube to disk</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#c-data-visualization">C. Data visualization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-vector-data-cube-into-memory">1) Read vector data cube into memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualize-velocity-data">2) Visualize velocity data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualize-associations-between-velocity-and-attribute-data">3) Visualize associations between velocity and attribute data</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Emma Marshall
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>